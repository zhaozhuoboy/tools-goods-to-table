# 京东商品同步到飞书表格 - 浏览器插件

一款浏览器插件，用于在京东商品详情页快速提取商品信息，并同步到飞书多维表格。

## 功能特性

- ✅ 自动提取京东商品信息（类目、店铺、名称、价格等）
- ✅ 表单编辑和验证
- ✅ 一键同步到飞书多维表格
- ✅ 美观的京东红主题 UI
- ✅ 配置管理和测试功能

## 安装说明

### 1. 准备图标文件

在 `icons/` 目录下放置以下图标文件：
- `icon16.png` (16x16 像素)
- `icon48.png` (48x48 像素)
- `icon128.png` (128x128 像素)

可以使用在线工具生成，或使用京东红色 (#E1251B) 背景的简单图标。

### 2. 加载插件

1. 打开 Chrome 浏览器
2. 访问 `chrome://extensions/`
3. 开启"开发者模式"（右上角）
4. 点击"加载已解压的扩展程序"
5. 选择项目目录

### 3. 配置飞书应用

1. 访问 [飞书开放平台](https://open.feishu.cn/)
2. 创建企业自建应用
3. 获取 **App ID** 和 **App Secret**
4. 在应用权限中开启：
   - `bitable:app` - 查看、编辑和管理多维表格
   - `bitable:app:readwrite` - 查看、编辑和管理多维表格中的所有数据表

### 4. 配置插件

1. 点击插件图标，打开设置页面
2. 填写飞书应用的 App ID 和 App Secret
3. 填写飞书多维表格的完整 URL
4. 点击"测试连接"和"验证表格"确保配置正确
5. 保存设置

## 使用方法

1. 打开京东商品详情页（如：`https://item.jd.com/xxx.html`）
2. 点击浏览器工具栏的插件图标
3. 点击"提取商品信息"按钮（或手动填写）
4. 检查并修改表单数据
5. 点击"同步到飞书表格"按钮

## 项目结构

```
goods-to-table/
├── manifest.json          # 插件配置文件
├── popup.html             # 弹窗页面
├── popup.js               # 弹窗逻辑
├── popup.css              # 弹窗样式
├── options.html            # 设置页面
├── options.js              # 设置页面逻辑
├── options.css             # 设置页面样式
├── background.js           # 后台服务脚本
├── content.js              # 内容脚本
├── icons/                  # 插件图标
│   ├── icon16.png
│   ├── icon48.png
│   └── icon128.png
├── PRD.md                  # 产品需求文档
└── README.md               # 项目说明
```

## 开发说明

### 技术栈

- Chrome Extension Manifest V3
- 原生 JavaScript (ES6+)
- 飞书开放平台 API

### 主要功能模块

1. **配置管理** (`options.js`)
   - 存储和管理飞书开发者凭证
   - 解析和验证表格 URL

2. **信息提取** (`popup.js`)
   - 从京东页面提取商品信息
   - DOM 元素定位和数据提取

3. **数据同步** (`background.js`)
   - Token 获取和缓存
   - 调用飞书 API 写入数据

## 注意事项

1. **字段映射**：确保飞书表格的字段名称与插件中的字段名称一致：
   - 一级类目
   - 店铺名称
   - 商品名称
   - 划线价格
   - 当前价格
   - 页面链接
   - 商品图片
   - 商品SKU

2. **权限配置**：确保飞书应用有足够的权限访问多维表格

3. **Token 缓存**：插件会自动缓存 Token，有效期约 2 小时

## 常见问题

**Q: 提取信息失败怎么办？**  
A: 可以手动填写表单，或检查京东页面结构是否发生变化。

**Q: 同步失败怎么办？**  
A: 检查网络连接、飞书应用权限、表格 URL 是否正确，以及字段名称是否匹配。

**Q: 如何更新字段映射？**  
A: 修改 `background.js` 中 `recordData.fields` 对象的字段名称。

## 许可证

MIT License

